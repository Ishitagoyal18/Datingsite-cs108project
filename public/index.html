<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="logo.jpg" >
  <title>Homepage</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 40px;
      color: white;
      z-index: 1;
    }

    .site-name {
      font-size: 24px;
      font-weight: bold;
      animation: fadeIn 1s ease-in-out;
    }

    .login-btn {
      background-color: #fff;
      color: #333;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
      animation: fadeIn 1s ease-in-out;
      display: flex;
      align-items: center;
      font-size: 16px;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .login-btn i {
      margin-right: 8px;
    }

    .login-btn:hover {
      background-color: #333;
      color: #fff;
    }

    .background-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: -1;
    }

    .background-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-image: url(image4first.jpg); 
      opacity: 1;
    }

    .content {
  display: flex;
  flex-direction: column; 
  align-items: flex-start;
  height: calc(100vh - 80px);
  padding: 40px;
  margin-left: 90px;
}

    
.left-content {
      max-width: 500px;
      color: white;
      animation: fadeIn 1s ease-in-out;
      text-align: left; }

    .left-content pre {
     font-size: 20px;
      margin-bottom: 10px;
      text-align: left; 
    }

    .brandtext {
      font-size: 40px;
      color: white;
      -webkit-text-fill-color: white;
      -webkit-text-stroke-width: 2px;
      -webkit-text-stroke-color: black;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      font-family: Arial, sans-serif;
      font-style: italic;
      text-align: left;
    }

    .left-content h1 {
      font-size: 52px;
      margin-bottom: 20px;

    }

    

    .parahead {
      color: black; /* Outline color */
      -webkit-text-fill-color: white; /* Fill color */
      -webkit-text-stroke-width: 2px; /* Outline width */
      -webkit-text-stroke-color: black; /* Outline color */
      text-shadow: 5px 5px black; /* Shadow effect */
    }

    .btn {
      display: inline-block;
      background-color: #fff;
      color: #333;
      text-decoration: none;
      padding: 12px 24px;
      border-radius: 4px;
      transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .btn:hover {
      background-color: #333;
      color: #fff;
    }



/*css for initial loading screen and appearance of clover*/ 
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #fff;
      z-index: 9999;
      opacity: 1;
      transition: opacity 0.5s ease-in-out;
    }
    .wrapper {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 350px;
  height: 440px;
  background: transparent;
  border: 2px solid rgba(255, 255, 255, 0.5);
  border-radius: 20px;
  backdrop-filter: blur(20px);
  box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
 
  justify-content: center;
  align-items: center;
  overflow: hidden;
  display:none;/*wrapper for login is initially hidden and is displayed when login button is clicked*/
    }
    .registerqueswrapper {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 350px;
  height: 330px;
  background: transparent;
  border: 2px solid rgba(255, 255, 255, 0.5);
  border-radius: 20px;
  backdrop-filter: blur(20px);
  box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
 
  justify-content: center;
  align-items: center;
  overflow: hidden;
  display:none;/*wrapper for register is initially hidden and is displayed when register button is clicked*/
    }
    .registerwrapper {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 350px;
  height: 505px;
  background: transparent;
  border: 2px solid rgba(255, 255, 255, 0.5);
  border-radius: 20px;
  backdrop-filter: blur(20px);
  box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
 
  justify-content: center;
  align-items: center;
  overflow: hidden;
  display:none;
    }
.forgotwrapper {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 350px;
    height: 300px;
    background: transparent;
    border: 2px solid rgba(255, 255, 255, 0.5);
    border-radius: 20px;
    backdrop-filter: blur(20px);
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
    justify-content: center;
    align-items: center;
    overflow: hidden;
    display:none;
}
.forgotqueswrapper {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 350px;
    height: 300px;
    background: transparent;
    border: 2px solid rgba(255, 255, 255, 0.5);
    border-radius: 20px;
    backdrop-filter: blur(20px);
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
    justify-content: center;
    align-items: center;
    overflow: hidden;
    display:none;
}
.forgotwrapper .forgotformbox{

  width:100%;
        padding:40px;


}
.registerqueswrapper .registerformbox{
  width:100%;
        padding:40px;
}
.forgotqueswrapper .forgotquesbox{
    width:100%;
        padding:40px;
}
    .wrapper .formbox{
        width:100%;
        padding:40px;

    }
    .registerwrapper .formbox{
        width:100%;
        padding:40px;
    }
    .forgotqueswrapper .iconcloseques{

        position:absolute;
        top:0;
        right:0;
        width:40px;
        height:40px;
        background:#162938;
        font-size:2em;
        color:#fff;
        display:flex;
        justify-content: center;
        border-bottom-left-radius:20px;
        cursor: pointer;
        z-index: 1;
    }
 /*to set css for close icon*/
    .chat-container .iconclosehelp{
      position:absolute;
        top:0;
        right:0;
        width:20px;
        height:30px;
        background:#162938;
        font-size:2em;
        color:#fff;
        display:flex;
        justify-content: center;
        border-bottom-left-radius:10px;
        cursor: pointer;
        z-index: 1;
    }
    .chat-container .iconclosehelp:hover{
      background:rgba(0,0,0,0.5);
        color:#fff;
    }
    .forgotwrapper .iconcloseforgot{
        position:absolute;
        top:0;
        right:0;
        width:40px;
        height:40px;
        background:#162938;
        font-size:2em;
        color:#fff;
        display:flex;
        justify-content: center;
        border-bottom-left-radius:20px;
        cursor: pointer;
        z-index: 1;
    }
    .wrapper .iconclose{
        position:absolute;
        top:0;
        right:0;
        width:40px;
        height:40px;
        background:#162938;
        font-size:2em;
        color:#fff;
        display:flex;
        justify-content: center;
        border-bottom-left-radius:20px;
        cursor: pointer;
        z-index: 1;

    }
    .registerwrapper .iconcloseregister{
        position:absolute;
        top:0;
        right:0;
        width:40px;
        height:40px;
        background:#162938;
        font-size:2em;
        color:#fff;
        display:flex;
        justify-content: center;
        border-bottom-left-radius:20px;
        cursor: pointer;
        z-index: 1;
    }

    .forgotwrapper .iconcloseforgot:hover{
        background:#fff;
        color:#162938;
    }
    .forgotqueswrapper .iconcloseques:hover{
        background:#fff;
        color:#162938;
    }
    .wrapper .iconclose:hover{
        background:#fff;
        color:#162938;
    }
    .registerwrapper .iconcloseregister:hover{
        background:#fff;
        color:#162938;
    }
    .registerformbox h2{
        font-size: 1.8em;
        color: #162938;
        text-align:center;
        opacity: 1;
       

    }
    .forgotformbox h2{
        font-size: 1.2em;
        color: #162938;
        text-align:center;
        opacity: 1;
    }
    .forgotquesbox h2{
        font-size: 1.2em;
        color: #162938;
        text-align:center;
        opacity: 1;
    }
   
    .formbox h2{
        font-size: 2em;
        color: #162938;
        text-align:center;
        opacity: 1;
    }
    .inputbox{
        position:relative;
        width: 100%;
        height:50px;
        border-bottom:2px solid #162938;
        margin:30px 0;


    }
    .inputbox label{
        position:absolute;
        top:50%;
        left:5px;
        transform: translateY(-50%);
        font-size: 1em;
        color: #162938;
        font-weight: 500;
        pointer-events:none;
        transition: .5s;

    }
    .inputbox input{
        width:100%;
        height: 100%;
        background: transparent;
        border: none;
        outline : none;
        font-size:1em;
        color:#162938;
        font-weight:600;
        padding:0 35px 0 5px;


    }
    .inputbox .icon{
        position: absolute;
        right:8px;
        font-size:1.2em;
        color:#162938;
        line-height:57px;
    }
    .inputbox input:focus~label,
    .inputbox input:valid~label{
        top:-5px;

    }
    .formbox .forgotbtn {
  background-color: transparent;
  border: none;
  color: #162938;
  font-size: 1em;
  font-weight: 500;
  cursor: pointer;
  padding: 0;
  margin-bottom: 20px;
 margin-left:130px;
}

.formbox  .forgotbtn:hover {
  text-decoration: underline;
}

.formbox .registerbutton {
  background-color: transparent;
  border: none;
  color: #162938;
  font-size: 1em;
  font-weight: 600;
  cursor: pointer;
  padding: 0;
  margin-bottom: 20px;

}

.formbox  .registerbutton:hover {
  text-decoration: underline;
}
.registerformbox .loginbutton {
  background-color: transparent;
  border: none;
  color: #162938;
  font-size: 1em;
  font-weight: 600;
  cursor: pointer;
  padding: 0;
  margin-bottom: 20px;

}

.registerformbox  .loginbutton:hover {
  text-decoration: underline;
}



.formbox .submitbtn{
    width:100%;
    height:45px;
    background: #162938;
    border:none;
    outline:none;
    border-radius: 6px;
    cursor:pointer;
    font-size:1em;
    color:#fff;
    font-weight: 500;
}
.registerformbox .registerbtn{
    width:100%;
    height:45px;
    background: #162938;
    border:none;
    outline:none;
    border-radius: 6px;
    cursor:pointer;
    font-size:1em;
    color:#fff;
    font-weight: 500;
}
.forgotformbox .nextbtn{
    width:100%;
    height:45px;
    background: #162938;
    border:none;
    outline:none;
    border-radius: 6px;
    cursor:pointer;
    font-size:1em;
    color:#fff;
    font-weight: 500;
}
.registerformbox .nextbtn{
    width:100%;
    height:45px;
    background: #162938;
    border:none;
    outline:none;
    border-radius: 6px;
    cursor:pointer;
    font-size:1em;
    color:#fff;
    font-weight: 500;
}
.forgotquesbox .passbtn{
    width:100%;
    height:45px;
    background: #162938;
    border:none;
    outline:none;
    border-radius: 6px;
    cursor:pointer;
    font-size:1em;
    color:#fff;
    font-weight: 500;
}
@keyframes loadingText {
  0% {
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 1;
  }
}

.loading-text {
  font-size: 48px;
  font-weight: bold;
  color: #333;
  animation: loadingText 2s ease-in-out infinite;
}
    #toastbox{
    position: absolute;
    bottom: 30px;
    right: 30px;
    display: flex;
    align-items: flex-end;
    flex-direction: column;
    overflow:hidden;
    padding: 20px;
}
.toast{
    width: 300px;
    height: 60px;
    background:white;
    font-weight: 500;
    margin: 15px 0;
    box-shadow: 0 0 20px;
    display: flex;
    align-items: center;
    justify-content:center;
    font-size: 15px;
    position: relative;
}
.toast::after{
    content: '';
    position: absolute;
    left: 0;
    bottom: 0;
    width:100%;
    height: 5px;
    background: green;
    animation: anim 3s linear forwards ;

}

@keyframes anim{
    100%{
        width:0;
    }
}
.toast.error::after{
    background: red;
}
.toast.error{
color: red;
}
.toast.succes{
    color: green;
}

    @keyframes fadeIn {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes scaleIn {
      0% {
        transform: scale(0.8);
        opacity: 0;
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    footer {
  display: flex; /* Use flexbox */
  justify-content: space-between; /* Horizontally arrange contents with space between them */
  align-items: center; /* Align items vertically in the center */
  color: #fff;
  padding: 10px 20px; /* Increase padding to provide more space */
  text-align: center;
  font-size: 12px;
  position: absolute;
  bottom: 0;
  width: calc(100% - 40px); /* Adjust width to account for padding */
  overflow: hidden; /* Prevent content from overflowing */
}

footer p {
  margin: 0; /* Remove default margin */
  flex: 1; /* Allow the paragraph to take up remaining space */
  text-align: center; /* Center the text */
}

footer button {
  margin-left: auto; /* Push the button to the right */
  background-color: transparent;
  border: none;
  color:white;
  font-size: 1.2em;
  font-weight: 500;
  cursor: pointer;
  padding: 0;
 
}
footer button:hover{
  text-decoration: underline;

}
    .sleeptoast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: #fff;
            padding: 10px 20px;
            border-radius: 4px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
            z-index: 100;
        }

        .sleeptoast.show {
            opacity: 1;
            visibility: visible;
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black */
            z-index: 999; /* Ensure the overlay is above other content */
            display: none; /* Initially hidden */
        }
        .login-register{
            font-size: 0.9em;
            color: #162938;
            text-align:center;
            font-weight:500;
            margin:25px 0 10px;

        }
       .login-register p a{
        color:#162938;
        text-decoration: none;;
        font-weight: 600;

       }
       .login-register p a:hover{
        text-decoration: underline;
       }
       .btn{
        background-color: #fff;
      color: #333;
      border-radius: 4px;
      transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      font-size: 20px;
      margin-top: 0;
       }
       
    .btn:hover {
      background-color: #333;
      color: #fff;
    }

.chat-container {
    width: 500px;
    height: 600px;
    border: 1px solid #ccc;
    border-radius: 10px;
    background-color: #fff;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    display: none;
    flex-direction: column;
    overflow: hidden;
    position: fixed; 
    bottom: 20px;
    right: 20px;
    transform: none; 
}

.chat-header {
    background-color: #333;
    color: #fff;
    padding: 10px;
    text-align: center;
    font-weight: bold;
}

.chat-box {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 10px;
    overflow-y: auto;
}

.chat-messages {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    padding: 10px;
}


.chat-messages::-webkit-scrollbar {
    width: 6px;
}

.chat-messages::-webkit-scrollbar-track {
    background-color: #f1f1f1;
}

.chat-messages::-webkit-scrollbar-thumb {
    background-color: #888;
    border-radius: 3px;
}

.chat-messages::-webkit-scrollbar-thumb:hover {
    background-color: #555;
}

.user-message {
    background-color: #4CAF50;
    color: white;
    padding: 10px;
    border-radius: 10px;
    margin-bottom: 10px;
    align-self: flex-end;
    max-width: 70%;
}

.server-message {
    background-color: #008CBA;
    color: white;
    padding: 10px;
    border-radius: 10px;
    margin-bottom: 10px;
    max-width: 70%;
    align-self: flex-start;
}

.server-word {
    display: inline-block;
    margin-right: 3px;
}

.chat-input {
    display: flex;
    align-items: center;
    margin-top: 10px;
    padding: 10px;
    background-color: #f2f2f2;
    border-top: 1px solid #ccc;
}

.chat-input select,
.chat-input button {
    margin-right: 10px;
    padding: 5px 10px;
    border-radius: 5px;
    border: 1px solid #ccc;
}

.chat-input button {
    background-color: #333;
    color: #fff;
    cursor: pointer;
}

.chat-input button:hover {
    background-color: #555;
}

  </style>
</head>
<body>


  <div class="loading-screen">
    <div class="loading-text"></div>
  </div>

  <header>
    <div class="site-name brandtext">Clover</div>
    <button class="login-btn" onclick="pop()">
      <i class="fas fa-sign-in-alt"></i> Login
    </button>
  </header>

  <div class="background-container">
    <div class="background-image"></div>
  </div>

  <div class="content">
    <div class="left-content">
      <h1 class="parahead">Looking for a date?</h1>
      <pre style="font-size:10;font-family: cursive;">
Don't worry when you have <span style="font-family: Arial, Helvetica, sans-serif;font-style: italic;">CLOVER </span> with you.
We got you covered. Experience the thrill of finding 
your perfect match with out innovative dating app.
Login and embark on the journey of finding true love


      </pre>
      <!--Pre tag is used to keep the content as it is-->
   <button type="button" class="btn" onclick="registeropen()">Join Clover</button>
    
    </div>
  </div>
  <!--Login wrapper is defined below and it appears on clicking login-->
  <div class="wrapper">
    <span class="iconclose">
        <ion-icon name="close"></ion-icon>
    </span>
    <div class="formbox login">
      <h2><b>Login</b></h2>
      <form id="loginform">
        <div class="inputbox">
            <span class="icon"><ion-icon name="person-circle-outline"></ion-icon></span>
            <input type="text" id="username" required>
            <label><b><i>Username</i></b></label>
           
        </div>
        <div class="inputbox">
             <span class="icon"><ion-icon name="lock-closed-outline"></ion-icon></span>
            <input type="password" id="password" required>
            <label><b><i>Password</i></b></label>
            
        </div>
        <button class="forgotbtn" onclick="openforgot()" id="forgotbutton" type="button">Forgot Password?</button>
      <div>
        <button onclick="func(event)" class="submitbtn" id="loginbutton">Login</button>
       </div>
       <div class="login-register">
        <p>Dont have an account?<button onclick="registeropen()" class="registerbutton" type="button" id="registerbuttn">Register</button></p>
       </div>
         
      </form>
    </div>
    </div>
    <!--Register wrapper is defined below-->
    <div class="registerwrapper">
      <span class="iconcloseregister">
        <ion-icon name="close"></ion-icon>
    </span>
    <div class="registerformbox register">
        <h2><b>Registration</b></h2>
        <form id="registerform">
          <div class="inputbox">
              <span class="icon"><ion-icon name="person-circle-outline"></ion-icon></span>
              <input type="text" id="registerusername" required>
              <label><b><i>Username</i></b></label>
             
          </div>

          <div class="inputbox">
               <span class="icon"><ion-icon name="lock-closed-outline"></ion-icon></span>
              <input type="password" id="registerpassword" required>
              <label><b><i>Password</i></b></label>
              
          </div>
         
          <div class="inputbox">
            <span class="icon"><ion-icon name="lock-closed-outline"></ion-icon></span>
           
           <input type="password" id="confirmregisterpassword" required>
           <label><b><i>Confirm Password</i></b></label>
           
       </div>
      
   
        <div>
          <button onclick="nextregister(event)" class="nextbtn" >Next</button>
         </div>
         <div class="login-register">
          <p>Already have an account?<button onclick="loginopen()" class="loginbutton" type="button">Login</button></p>
         </div>
           
        </form>
      </div>

</div>
<!--Part of registration in which ques is to be entered-->
<div class="registerqueswrapper">
        
  <div class="registerformbox register">
     
      <form id="registerquesform">
       

       
        <div class="inputbox">
         
         <input type="text" id="secret-ques" required>
         <label><b><i>Secret Question</i></b></label>
         
     </div>
     <div class="inputbox">
         
      <input type="text" id="secret-ans" required>
      <label><b><i>Answer to secret question</i></b></label>
      
  </div>
 
      <div>
        <button onclick="register(event)" class="registerbtn" >Register</button>
       </div>
     
      </form>
    </div>

</div>
<!--form to take username as input in forgot password-->
<div class="forgotwrapper">
    <span class="iconcloseforgot">
        <ion-icon name="close"></ion-icon>
    </span>
    <div class="forgotformbox forgot">
        <h2><b>Enter your username to get your password</b></h2>
        <form id="forgotform">
            <div class="inputbox">
                <span class="icon"><ion-icon name="person-circle-outline"></ion-icon></span>
                <input type="text" id="forgotuser" required>
                <label><i>Username </i></label>
               
            </div>
            <button onclick="check(event)" class="nextbtn">Next</button>
        </form>
    </div>


</div>
<div class="forgotqueswrapper">
    <span class="iconcloseques">
        <ion-icon name="close"></ion-icon>
    </span>
    <div class="forgotquesbox">
        <h2 id="showques"><b></b></h2>
        <form id="forgotques">
            <div class="inputbox">

                <input type="text" id="answer" required>
                <label><i>Answer </i></label>
               
            </div>
            <button onclick="pwdisplay(event)" class="passbtn">Show Password</button>
        </form>
    </div>
</div>
  <div  id="toastbox"></div>
  <div class="sleeptoast" id="sleeptoast">
    <p>You have entered wrong password multiple times. Try again in 30 seconds.</p>
</div>

  
  <footer>
    <p>&copy; 2024 Clover. All rights reserved.</p>
    <button type="button" onclick="openhelpbox()">Need Help?</button>
  </footer> 
  <div class="overlay" id="overlay"></div>
  <!--This overlay is defined for locking of screen if wrong password entered for 3 times-->
  <!--This is a chatbox with questions in form of dropdown menu-->
  <div class="chat-container">
    <span class="iconclosehelp">
      <ion-icon name="close"></ion-icon>
  </span>
    <div class="chat-box" id="chat-box">
        <div class="chat-messages" id="chat-messages"></div>
        <div class="chat-input">
            <select id="question-select">
                <option value="">Select a question</option>
                <option value="1">How do I create an account?</option>
                <option value="2">What if I forget my password?</option>
                
                <option value="3">Is this site safe and secure?</option>
                <option value="4">Is Clover free to use, or are there any fees involved?</option>
                <option value="5">Are there any age restrictions for using Clover?</option>
            </select>
            <button onclick="sendQuestion()">Send</button>
        </div>
    </div>
</div>

</body>
<script>
    
    const loadingScreen = document.querySelector('.loading-screen');
    const loadingText = document.querySelector('.loading-text');

    const loadingTextContent = 'CLOVER';
    let currentIndex = 0;

    function displayLoadingText() {
      if (currentIndex < loadingTextContent.length) {
        loadingText.textContent += loadingTextContent[currentIndex];//So that CLOVER appears word by word
        currentIndex++;
        setTimeout(displayLoadingText, 200);
      } else {
        loadingScreen.style.opacity = '0';
        setTimeout(() => {
          loadingScreen.style.display = 'none';
        }, 500);
      }
    }

    window.addEventListener('load', () => {
      displayLoadingText();//loading text appears every time screen is reloaded
    });


    function registeropen(){
    document.getElementsByClassName("wrapper")[0].style.display="none";//To ensure login wrapper is closed before opening register
    document.getElementsByClassName("registerwrapper")[0].style.display="flex";//To open register wrapper
    clearInputFields("registerform"); //To ensure input fields are all clear before opening it fresh
    clearInputFields("registerquesform");
 }
 function loginopen(){
    document.getElementsByClassName("wrapper")[0].style.display ="flex"; //To ensure login wrapper is opened
    document.getElementsByClassName("registerwrapper")[0].style.display ="none";
    clearInputFields("loginform");  

 }
 function clearInputFields(formId) {
    const form = document.getElementById(formId);
    const inputs = form.querySelectorAll("input");
    inputs.forEach(input => {
        input.value = "";
    });
}

 function nextregister(event){

  event.preventDefault();
     const registerusername=document.getElementById("registerusername").value;
    const password = document.getElementById('registerpassword').value;
    const confirmPassword = document.getElementById('confirmregisterpassword').value;
     if(!registerusername||!password||!confirmPassword){
      return showtoast("Please enter all fields");
     }
    //to check if all fields are filled
     if(password!=confirmPassword){
    return showtoast("Passwords do not match. Please enter again.");
  }
 //If confirm password and password dont match then dont move further
   document.getElementsByClassName("registerqueswrapper")[0].style.display="flex";
   document.getElementsByClassName("registerwrapper")[0].style.display="none";
 }
    function pop(){
        document.getElementsByClassName("wrapper")[0].style.display="flex" 
    }
    const iconclose=document.querySelector(".iconclose");
    iconclose.addEventListener("click",()=>{
        document.getElementsByClassName("wrapper")[0].style.display="none"; //if close icon is closede then wrapper is closed
    })
    const iconclosehelp=document.querySelector(".iconclosehelp");
    iconclosehelp.addEventListener("click",()=>{
        document.getElementsByClassName("chat-container")[0].style.display="none"; 
        
    })
    let sleepTimeout; // Variable to hold the timeout for sleep mode

let failedAttempts = 0; 
let isLocked = false;
let toastTimeout;

function func(event) {
  event.preventDefault();
  // Get input values
  var user = document.getElementById('username').value.split(" ");
  var password = document.getElementById('password').value;
  var username = user[0];
  // Validate inputs
  if (username.trim() === '' || password.trim() === '') {
    showtoast('Please enter both username and password.');
    return;
  }

  // Load JSON data and check login
  loadJSON("login.json")
    .then(function(usersData) {
      var userfound = usersData.some(function(user) {
        return user.username === username && user.password === password;
      });
      var namematch = usersData.some(function(user) {
        return user.username === username;

      });

      if (userfound) {
        showtoast("Login successful. Redirecting...");
        localStorage.setItem('username', username);
         //username is stored in local storage to handle like profiles in scroll swipe page
        failedAttempts = 0; //if password is correct then failed attempts set to 0
        isLocked = false; 
        hideToast();
        setTimeout(() => {
          window.location.href = "input.html"; //redirected to input page
        }, 3000);
      } else if (namematch) {
        failedAttempts++; //if password is not correct failed attemps are increasing 
        if (failedAttempts >= 3) { //and once they increase 3 screen is locked
          isLocked = true;
          showToast();
          toastTimeout = setTimeout(() => {
            isLocked = false;
            hideToast();
          }, 30000);
        }
        showtoast("Wrong Password. Try again.");
        // Call sleepScreen after 3 failed attempts
        sleepScreen();
      } else {
        showtoast("Invalid username or password. Try again");
      }
    })
    .catch(function(error) {
      console.error('Error loading JSON data:', error);
      alert('Error loading user data. Please try again.');
    });
}

function sleepScreen() {
  // Clear any existing timeout
  clearTimeout(sleepTimeout);
  
  // Set timeout to end sleep mode after 30 seconds
  sleepTimeout = setTimeout(() => {
    // Remove any existing toast
    hideToast();
  }, 30000); // 30 seconds
}
function showToast() {
  const toast = document.getElementById('sleeptoast');
  toast.classList.add('show');
  // Disable password input during lockout
  const passwordInput = document.getElementById('password');
  passwordInput.value = ''; // Empty the password field
  passwordInput.disabled = true;
  // Disable login button during lockout
  document.getElementById('loginbutton').disabled = true;
  // Disable forgot password button during lockout
  document.getElementById('forgotbutton').disabled = true;
  document.getElementById('registerbuttn').disabled = true;
 

  // Display countdown timer
  let remainingTime = 30;
  const countdownInterval = setInterval(() => {
    remainingTime--;
    const minutes = Math.floor(remainingTime / 60);
    const seconds = remainingTime % 60;
    const countdownMessage = `Try again in ${minutes}:${seconds.toString().padStart(2, '0')}`;
    toast.innerHTML = `<p>${countdownMessage}</p>`;
    if (remainingTime <= 0) {
      clearInterval(countdownInterval);
      hideToast();
    }
  }, 1000);
}
function hideToast() {
  const toast = document.getElementById('sleeptoast');
  toast.classList.remove('show');
  clearTimeout(toastTimeout);
  // Enable password input after lockout ends
  const passwordInput = document.getElementById('password');
  passwordInput.disabled = false;
  // Enable login button after lockout ends
  document.getElementById('loginbutton').disabled = false;
  // Enable forgot password button after lockout ends
  document.getElementById('forgotbutton').disabled = false;
}
function loadJSON(url) {
    return fetch(url)
        .then(function(response) {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        });
}

let toastbox=document.getElementById('toastbox')
//This showtoast is used for maximum error handling 
function showtoast(msg){
    let toast= document.createElement('div');
    toast.classList.add('toast');
    toast.innerHTML=msg;
    toastbox.appendChild(toast);
    //classes are included to make sure error msg is in red and success msg in green
    if(msg.includes('Wrong')){
        toast.classList.add('error');
    }  
    if(msg.includes('Invalid')){
        toast.classList.add('error');
    } 
    if(msg.includes('Succesful')){
        toast.classList.add('succes');
    } 
    if(msg.includes('enter')){
        toast.classList.add('error');
    } 
    setTimeout(()=>{
        toast.remove();
    },3000)

}
function openforgot(){
    document.getElementsByClassName("forgotwrapper")[0].style.display="flex"
    document.getElementsByClassName("wrapper")[0].style.display="none"
}
const iconcloseforgot=document.querySelector(".iconcloseforgot");
    iconcloseforgot.addEventListener("click",()=>{
        document.getElementsByClassName("forgotwrapper")[0].style.display="none";
        document.getElementsByClassName("wrapper")[0].style.display="flex";
    })
   
    const iconcloseques=document.querySelector(".iconcloseques");
    iconcloseques.addEventListener("click",()=>{
        document.getElementsByClassName("forgotqueswrapper")[0].style.display="none";
        document.getElementsByClassName("forgotwrapper")[0].style.display="flex";
    })
    const iconcloseregister=document.querySelector(".iconcloseregister");
    iconcloseregister.addEventListener("click",()=>{
        document.getElementsByClassName("registerwrapper")[0].style.display="none";
    })
  async function check(event) {
    event.preventDefault();

 
 const userarray = document.getElementById("forgotuser").value.split(" ");
 const username=userarray[0]

 
 const users = await loadUserData();
 const user = users.find(u => u.username === username);
 
 if (user) {
   const question = user.secret_question;
 
   showques(question)
 } else {
  showtoast("Please enter valid username")
 }
}
//this function is defined to fetch login.json data
async function loadUserData() {
    try {
      const response = await fetch('login.json');
      const userData = await response.json();
      return userData; // Return the array of user objects
    } catch (error) {
      console.error('Error loading user data:', error);
      return []; // Return an empty array in case of error
    }
  }

function showques(question) {
  


document.getElementsByClassName("forgotwrapper")[0].style.display = "none";
document.getElementsByClassName("forgotqueswrapper")[0].style.display="flex";
const quesdisplay=document.getElementById("showques");
  quesdisplay.innerHTML=question 
 
}
//if answer is correct then function to display the correct password
async function pwdisplay(event){
    event.preventDefault();
    const userarray = document.getElementById("forgotuser").value.split(" ");
    const username=userarray[0]
    const users = await loadUserData();
    
    const user = users.find(u => u.username === username);
    const correctans =user.secret_answer;
    const password = user.password;
    const givenans = document.getElementById("answer").value.trim();
    if(givenans===''){
        msg="Please enter your answer";
        showtoast(msg);
    
    }
    else if(givenans===correctans){
        msg="Your password is: "+password;
        showtoast(msg)
     
        setTimeout(()=>{
           document.getElementsByClassName("wrapper")[0].style.display="flex";
           document.getElementsByClassName("forgotqueswrapper")[0].style.display="none";
        },3000)

    }
    else {
       
        msg="Wrong answer.Try again!";
        showtoast(msg)
       
    }
}
function register(event) {
  event.preventDefault();

  // Get input values from the registration form
  const enterusername = document.getElementById('registerusername').value.trim();
  const enterpassword = document.getElementById('registerpassword').value.trim();
  const secretQuestion = document.getElementById('secret-ques').value.trim();
  const secretAnswer = document.getElementById('secret-ans').value.trim();
  const confirmPassword=document.getElementById('confirmregisterpassword').value;
  // Check if all fields are filled
  if (!enterusername || !enterpassword || !secretQuestion || !secretAnswer) {
    return showtoast("Please enter all the fields");
  }
  
  // Create an object with the user data
  const userData = {
    username: enterusername,
    password: enterpassword,
    secret_question: secretQuestion,
    secret_answer: secretAnswer
  };
   
  // Send a POST request to the server in json format 
  fetch('/register', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(userData)
  })
  .then(response => {
    if (response.ok) {
      return response.text(); // Parse response text
    } else if (response.status === 400) { //if username already exists then 400 status code is sent 
      document.getElementsByClassName("registerqueswrapper")[0].style.display ="none";//redirect back to username enter page
      document.getElementsByClassName("registerwrapper")[0].style.display ="flex";
      throw new Error('Username already exists. Please enter a new username.');
      
    } else {
      throw new Error('Registration failed');
    }
  })
  .then(data => {
    // Registration successful
   
    showtoast("Registration successful"); // Display success message
    setTimeout(()=>{
           document.getElementsByClassName("wrapper")[0].style.display="flex";
           document.getElementsByClassName("registerqueswrapper")[0].style.display="none";
           document.getElementById("username").value = enterusername;
        },3000)

    // Redirect user to another page, display a success message.
  })
  .catch(error => {
    console.error('Registration error:', error);
    
    showtoast(error.message); // Display error message
  });
}


function openhelpbox(){
  document.getElementsByClassName("chat-container")[0].style.display="flex";
  displayMessage("How can I assist you?","server-message")//to show the default message as help box is opened
}

function sendQuestion() {
    const questionId = document.getElementById('question-select').value;//id of selected question is recorded and sent to server in json format
    if (questionId) {
        fetch('/api/faq', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ questionId })
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            displayMessage(data.answer, 'server-message'); // Server message
        })
        .catch(error => {
            console.error('Error:', error);
        });

        displayMessage(document.getElementById('question-select').options[document.getElementById('question-select').selectedIndex].text, 'user-message'); // User message
    }
}
//displayMessage is defined so that messga ecomes word by word to imitate the real time chat feel
function displayMessage(message, messageClass) {
    const chatMessages = document.getElementById('chat-messages');
    const messageElement = document.createElement('div');
    messageElement.classList.add(messageClass); // Add class dynamically
    chatMessages.appendChild(messageElement);
    
    // For server messages, display word by word
    if (messageClass === 'server-message') {
        const words = message.split(' ');
        words.forEach((word, index) => {
            setTimeout(() => {
                const wordElement = document.createElement('span');
                wordElement.textContent = word + ' ';
                wordElement.classList.add('server-word'); // Add class for styling
                messageElement.appendChild(wordElement);
            }, index * 300); 
        });
    } else {
        messageElement.textContent = message; // For user messages, display the entire message
    }
}

</script>
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

</html>
